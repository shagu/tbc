<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WoW Vault | TBC Macros</title>
    <link rel="stylesheet" href="../assets/css/main.css">
    <script src="../assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="../assets/js/bigfoot.min.js"></script>
</head>

<body class="subsection">
    <h1>Macros / <a id="header" href="https://wowvault.github.io/tbc/addons">Addons</a></h1>
    <div class="toc"><p><a href="#general"><img id="icons-alt" src="../assets/img/general.png"> General</a> | <a href="#druid"><img id="icons-alt" src="../assets/img/classes/druid/icon.jpg"> Druid</a> | <a href="#hunter"><img id="icons-alt" src="../assets/img/classes/hunter/icon.jpg"> Hunter</a> | <a href="#mage"><img id="icons-alt" src="../assets/img/classes/mage/icon.jpg"> Mage</a> | <a href="#paladin"><img id="icons-alt" src="../assets/img/classes/paladin/icon.jpg"> Paladin</a> | <a href="#priest"><img id="icons-alt" src="../assets/img/classes/priest/icon.jpg"> Priest</a> | <a href="#rogue"><img id="icons-alt" src="../assets/img/classes/rogue/icon.jpg"> Rogue</a> | <a href="#shaman"><img id="icons-alt" src="../assets/img/classes/shaman/icon.jpg"> Shaman</a> | <a href="#warlock"><img id="icons-alt" src="../assets/img/classes/warlock/icon.jpg"> Warlock</a> | <a href="#warrior"><img id="icons-alt" src="../assets/img/classes/warrior/icon.jpg"> Warrior</a></p></div>
    <h1 id="general"><a href="#general"><img id="icons" src="../assets/img/general.png"></a> General</h1>
        <h3>Mouseover (Friendly)</h3>
            <code>
                /cast [target=mouseover,exists][target=target,exists][target=player] SPELLNAME
            </code>
        <h3>Mouseover (Harmful)</h3>
            <code>
                /cast [target=mouseover, exists][help][target=enemy] SPELLNAME<br>
                /cast SPELLNAME
            </code>
        <h3>Cancel Aura</h3>
            <code>
                /cast SPELLNAME<br>
                /cancelaura SPELLNAME
            </code>
        <h3>Harm/Help</h3>
            <code>
                /cast [harm] SPELLNAME; [help] SPELLNAME<br>
                /cast SPELLNAME
            </code>
        <h3>Self-Cast Modifier and Mouseover</h3>
            <code>
                /cast [mod:alt,target=player][target=mouseover,exists][help][] SPELLNAME
            </code>
        <h3>All-in-One Healthstone</h3>
            <code>
                #showtooltip Master Healthstone<br>
                /use item:22105<br>
                /use item:22104<br>
                /use item:22103
            </code>
        <h3>Set Camera Distance</h3>
            <code>
                /script SetCVar("cameraDistanceMax",50)
            </code>
        <h3>Announce a Spell's CD in Raid/Party</h3>
            <code>
                #showtooltip SPELLNAME<br>
                /run local p="SPELLNAME"local t,f,s,d=" ready!",math.floor,GetSpellCooldown(p)local c=s+d-GetTime()local m,r=f(c/60),f(c%60)if d>0 then t=": "..m.."m "..r.."s"end;SendChatMessage(p..t,UnitInRaid("Player")and"RAID"or"PARTY")
            </code>
        <h3>Use DBM to Announce Spell CDs <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></h3>
            <code>
                #showtooltip<br>
                /run if GetSpellCooldown("SPELLNAME")==0 then DBM.StartStatusBarTimer(TIME,"SPELLNAME","Interface\Icons\Spell_HolyAshesToAshes") end<br>
                /cast SPELLNAME
            </code>
        <h3>Combat Log Fix</h3>
            <code>
                /run local f=CreateFrame("frame",nil, UIParent);function g() DEFAULT_CHAT_FRAME:AddMessage("foo"); end; f:SetScript("OnUpdate", CombatLogClearEntries)
            </code>
        <h3>Hide Gryphons from Default Action Bars</h3>
            <code>
                /run MainMenuBarLeftEndCap:Hide(); MainMenuBarRightEndCap:Hide()
            </code>
        <h3>Error Messages</h3>
            <p>Clear:</p>
                <code>
                    /script UIErrorsFrame:Clear()
                </code>
            <p>Hide:</p>
                <code>
                    /script UIErrorsFrame:Hide()
                </code>
            <p>Show:</p>
                <code>/script UIErrorsFrame:Show()</code>
        <h3>Set Target Marks <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup></h3>
            <p>Target:</p>
                <code>
                    /script SetRaidTarget("target", MARKNUMBER)
                </code>
            <p>Mouseover:</p>
                <code>
                    /script SetRaidTarget("mouseover", MARKNUMBER)
                </code>
        <h3>Calculate Your Mana Gains from Innervate</h3>
            <code>
                /script DEFAULT_CHAT_FRAME:AddMessage((((GetUnitManaRegenRateFromSpirit("player"))*80)+((GetManaRegen("player"))*20)),0,0.1,1)
            </code>
        <h3>Set Master Loot <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup></h3>
            <code>
                /run j=GetLootMethod() k=UnitLevel("target") if (k<0 and IsRaidLeader() and j=="group") then SetLootMethod("master","YOURNAME") end
            </code>
        <h3>Mark Groups <sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup></h3>
            <code>
                /script bbgn=mod((bbgn or 1)-1,3)+2; local t = 1; for i=1,40 do local _,_,g = GetRaidRosterInfo(i); if g==bbgn then SetRaidTarget("raid"..i,t); t=t+1; end end SendChatMessage("GROUPNAME "..bbgn,"RAID_WARNING");
            </code>
        <h3>Announce the Current DPS Target in Raid Warning <sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></h3>
            <code>
                /script local i,s,g,u,c={"star","circle","diamond","triangle","moon","square","cross","skull"},SendChatMessage,GetRaidTargetIndex("target"),UnitName("target"),"RAID_WARNING" if g then s("Target: {"..i[g].."} "..u,c)else s("Target: "..u,c)end
            </code>
        <h3>Print Current MS/FPS in /say</h3>
            <code>
                /script local fps = GetFramerate(); down, up, lag = GetNetStats(); SendChatMessage("Latency: "..lag.." ms // FPS: "..floor(fps), say);
            </code>
        <h3>Print Current Net Stats in Chat Window</h3>
            <code>
                /run local down,up,lag=GetNetStats() DEFAULT_CHAT_FRAME:AddMessage("down: "..down.."\nup: "..up.."\nlatency: "..lag.." ms")
            </code>
        <h3>Print Current Buffs in Chat Window</h3>
            <code>
                /run local i=1 while UnitBuff("player",i) do DEFAULT_CHAT_FRAME:AddMessage(UnitBuff("player",i)); i=i+1 end
            </code>
        <h3>Print Raid Members Below a Certain HP in Chat Window <sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup></h3>
            <code>
                /script for i = 1, 40 do local u = "raid"..i; local hp = UnitHealthMax(u); local _, _, grp = GetRaidRosterInfo(i); if UnitExists(u) and hp < HEALTHVALUE and grp <= 5 then ChatFrame1:AddMessage(UnitName(u)..": "..hp.." HP"); end end
            </code>
        <h3>Check Flasks</h3>
            <code>
                /run nf="[Flask!]: ";for i=1,GetNumRaidMembers()do for b=1,41 do ufl=UnitAura('raid'..i,b);if ufl then if strfind(ufl,"Flask")then break;end;elseif b==41 then nf=nf..UnitName('raid'..i).." ";end;end;end;SendChatMessage(nf,"raid");
            </code>
        <h3>Remove a Buff <sup id="fnref:7"><a href="#fn:7" rel="footnote">7</a></sup></h3>
            <code>
                /run local _,_,t=GetSpellInfo(SPELLID) for i=1,40 do local _,_,x=UnitBuff("player",i) if x==t then CancelPlayerBuff(i) end end
            </code>
        <h3>Remove Your Items to Save Repair Costs</h3>
            <code>
                /script local t={1,3,5,6,7,8,9,10,16,17,18}; for k,v in pairs(t) do PickupInventoryItem(v); PutItemInBag(22); end
            </code>
        <h3>Sell Gray Items</h3>
            <code>
                /script for bag = 0, 4 do for slot = 1, GetContainerNumSlots(bag) do local name = GetContainerItemLink(bag,slot) if name and string.find(name,"ff9d9d9d") then DEFAULT_CHAT_FRAME:AddMessage("Selling "..name) UseContainerItem(bag,slot) end end end
            </code>
        <h3>Learn All Available Skills from a Trainer</h3>
            <code>
                /run LoadAddOn"Blizzard_TrainerUI" f=ClassTrainerTrainButton f.e=0 if f:GetScript"OnUpdate" then f:SetScript("OnUpdate",nil) else f:SetScript("OnUpdate",function(f,e) f.e=f.e+e if f.e>.01 then f.e=0 f:Click() end end) end
            </code>
    <br>
    <h1 id="druid"><a href="#druid"><img id="icons" src="../assets/img/classes/druid/icon.jpg"></a> Druid</h1>
        <h2><img id="icons-alt" src="../assets/img/classes/druid/balance/icon.jpg" > Balance</h2>
            <h3>Focus Cyclone</h3>
                <code>
                    #showtooltip Cyclone<br>
                    /cast [target=focus, modifier:shift] Cyclone; Cyclone
                </code>
            <h3>Focus Root</h3>
                <code>
                    #showtooltip Entangling Roots(Rank 1)<br>
                    /cast [target=focus] Entangling Roots(Rank 1)
                </code>
        <h2><img id="icons-alt" src="../assets/img/classes/druid/feraltank/icon.jpg"> Feral Tank</h2>
            <h3>Avoidance Check</h3>
                <code>
                    /script DEFAULT_CHAT_FRAME:AddMessage(2.6-(GetCombatRatingBonus(CR_DEFENSE_SKILL)*.04+GetCombatRatingBonus(CR_CRIT_TAKEN_MELEE)),1,0.5,0)
                </code>
            <h3>Health Shift <sup id="fnref:8"><a href="#fn:8" rel="footnote">8</a></sup></h3>
                <code>
                    /run local f="Dire Bear Form";f=GetSpellCooldown(f)>0 or UnitMana('player')>XXX or not IsUsableSpell(f) or CancelPlayerBuff(f)<br>
                    /stopmacro [form:1]<br>
                    /use Master Healthstone<br>
                    /use Healing Potion Injector<br>
                    /cast Dire Bear Form
                </code>
        <h2><img id="icons-alt" src="../assets/img/classes/druid/feraldps/icon.jpg" > Feral DPS</h2>
            <h3>Powershift</h3>
                <code>
                    /cast !Cat Form
                </code>
            <h3>Smarter Powershift <sup id="fnref:9"><a href="#fn:9" rel="footnote">9</a></sup></h3>
                <code>
                    /run local f="Cat Form";f=GetSpellCooldown(f)>0 or UnitMana('player')>MANAVALUE or not IsUsableSpell(f) or CancelPlayerBuff(f)<br>
                    /stopmacro [form]<br>
                    /cast Cat Form
                </code>
    <br>
    <h1 id="hunter"><a href="#hunter"><img id="icons" src="../assets/img/classes/hunter/icon.jpg"></a> Hunter</h1>
        <h3>Steady Shot & Kill Command</h3>
            <code>
                #showtooltip Steady Shot<br>
                /cast Steady Shot<br>
                /cast [exists,target=pettarget] Kill Command<br>
                /run UIErrorsFrame:Clear();
            </code>
        <h3>All-in-One Pet Control</h3>
            <code>
                #show [modifier:alt] FOODNAME<br>
                /cast [nopet] Call Pet<br>
                /cast [dead][mod:shift] Revive Pet<br>
                /cast [pet,nomod,button:1] Mend Pet<br>
                /cast [pet,nomod,button:2] Dismiss Pet<br>
                /cast [pet,mod:alt] Feed Pet<br>
                /use [pet,mod:alt] FOODNAME
            </code>
        <h3>Focus Misdirection</h3>
            <code>
                #showtooltip Misdirection<br>
                /cast [target=focus] Misdirection<br>
                /s Misdirection on %f
            </code>
        <h3>Get Happiness</h3>
            <code>
                /script h,_,l=GetPetHappiness();DEFAULT_CHAT_FRAME:AddMessage("Happy: " .. h .. " - Loyalty: " .. l);
            </code>
    <br>
    <h1 id="mage"><a href="#mage"><img id="icons" src="../assets/img/classes/mage/icon.jpg"></a> Mage</h1>
        <h3>Instance Ice Block</h3>
            <code>
                #showtooltip Ice Block<br>
                /stopcasting<br>
                /cast Ice Block
            </code>
    <br>
    <h1 id="paladin"><a href="#paladin"><img id="icons" src="../assets/img/classes/paladin/icon.jpg"></a> Paladin</h1>
        <h2><img id="icons-alt" src="../assets/img/classes/paladin/protection/icon.jpg" > Protection</h2>
            <h3>Taunt</h3>
                <code>
                    /cast [noharm][noharm,target=targettarget][] Righteous Defense
                </code>
            <h3>Avoidance Check</h3>
                <code>
                    /script DEFAULT_CHAT_FRAME:AddMessage("Need 102.4 combined avoidance. Currently at:",0.8,0.8,1)<br>
                    /script DEFAULT_CHAT_FRAME:AddMessage(GetDodgeChance()+GetBlockChance()+GetParryChance()+5+(GetCombatRating(CR_DEFENSE_SKILL)*150/355 + 20)*0.04,1,0.5,0)
                </code>
    <br>
    <h1 id="priest"><a href="#priest"><img id="icons" src="../assets/img/classes/priest/icon.jpg"></a> Priest</h1>
        <h2><img id="icons-alt" src="../assets/img/classes/priest/shadow/icon.jpg" > Shadow</h2>
            <h3>Mind Flay</h3>
                <code>
                    #showtooltip Mind Flay<br>
                    /cast [nochanneling] Mind Flay
                </code>
    <br>
    <h1 id="rogue"><a href="#rogue"><img id="icons" src="../assets/img/classes/rogue/icon.jpg"></a> Rogue</h1>
        <h3>Focus Kick</h3>
            <code>
                #showtooltip Kick<br>
                /cast [target=focus] Kick
            </code>
    <br>
    <h1 id="shaman"><a href="#shaman"><img id="icons" src="../assets/img/classes/shaman/icon.jpg"></a> Shaman</h1>
        <h2><img id="icons-alt" src="../assets/img/classes/shaman/enhancement/icon.jpg" > Enhancement</h2>
            <h3>Twisting</h3>
                <code>
                    /castsequence reset=10 Stormstrike, Windfury Totem, Grace of Air Totem
                </code>
        <h2><img id="icons-alt" src="../assets/img/classes/shaman/restoration/icon.jpg" > Restoration</h2>
            <h3>Instant Heal</h3>
                <code>
                    #showtooltip Nature's Swiftness<br>
                    /cast Nature's Swiftness<br>
                    /stopcasting<br>
                    /cast [help] Healing Wave(Rank 12); [target=player] Healing Wave(Rank12)
                </code>
    <br>
    <h1 id="warlock"><a href="#warlock"><img id="icons" src="../assets/img/classes/warlock/icon.jpg"></a> Warlock</h1>
        <h3>Delete Shards <sup id="fnref:10"><a href="#fn:10" rel="footnote">10</a></sup></h3>
            <code>
                /run i="Soul Shard"d=GetItemCount(i)-30 for x=0,4 do for y=1,GetContainerNumSlots(x) do  if (d>0) then l=GetContainerItemLink(x,y) if l and GetItemInfo(l)==i then PickupContainerItem(x,y) DeleteCursorItem() d=d-1 end end end end<br>
                /cast Drain Soul(Rank 1)
            </code>
    <br>
    <h1 id="warrior"><a href="#warrior"><img id="icons" src="../assets/img/classes/warrior/icon.jpg"></a> Warrior</h1>
        <h2><img id="icons-alt" src="../assets/img/classes/warrior/protection/icon.jpg" > Protection</h2>
            <h3>Avoidance Check</h3>
                <code>
                    /script DEFAULT_CHAT_FRAME:AddMessage("Need 102.4 combined avoidance. Currently at:",0.8,0.8,1)<br>
                    /script DEFAULT_CHAT_FRAME:AddMessage(GetDodgeChance()+GetBlockChance()+GetParryChance()+5+(GetCombatRating(CR_DEFENSE_SKILL)*150/355 + 20)*0.04,1,0.5,0)
                </code>
    <br>
    <footer>Ran into a problem, or have ideas for improvement? Create an issue, or a pull request on <a href="https://github.com/wowvault/tbc">Github</a>.</footer>

    <!-- Scripts -->
    <script src="../assets/js/vanilla-back-to-top.min.js"></script>

    <!-- Initiate Back to Top -->
    <script>
        addBackToTop({
            diameter: 50,
            backgroundColor: 'var(--background-alt)',
            textColor: 'var(--text-main)'
        })
    </script>

    <!-- Initiate Bigfoot -->
    <script type="text/javascript">
        var bigfoot = $.bigfoot(
            {
                deleteOnUnhover: false,
                preventPageScroll: false,
                activateOnHover: false
            }
        );
    </script>

    <!-- ToC Scroll -->
    <script>
        $(document).ready(function () {
            $('a').on('click', function (e) {
                // e.preventDefault();

                var target = this.hash,
                    $target = $(target);

                $('html, body').stop().animate({
                    'scrollTop': $target.offset().top - 60
                }, 250, 'swing', function () {
                });

                //console.log(window.location);

                //return false;
            });
        });
    </script>

    <!-- Footnotes -->
    <div class="footnotes"><ol><li class="footnote" id="fn:1"><p>This countdown will sync with people who are also using DBM. Spamming the macro doesn't create extra bars.<br><br>To use the macro for a spell you want to use, you should replace <em>SPELLNAME</em> in the macro, and <em>TIME</em> with the amount of uptime your spell has in seconds.<a href="#fnref:1" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:2"><p>Replace <em>MARKNUMBER</em> with the mark of your choosing:<br><br>1: <img id="icons-alt" src="../assets/img/marks/star.png"><br>2: <img id="icons-alt" src="../assets/img/marks/circle.png"><br>3: <img id="icons-alt" src="../assets/img/marks/diamond.png"><br>4: <img id="icons-alt" src="../assets/img/marks/triangle.png"><br>5: <img id="icons-alt" src="../assets/img/marks/moon.png"><br>6: <img id="icons-alt" src="../assets/img/marks/square.png"><br>7: <img id="icons-alt" src="../assets/img/marks/cross.png"><br>8: <img id="icons-alt" src="../assets/img/marks/skull.png"><a href="#fnref:2" title="return to article"> ↩</a><p></li></ol></div> 
    <div class="footnotes"><ol><li class="footnote" id="fn:3"><p>If you're a raid leader and often forget to turn master loot on, add this macro to one of the macros you regularly use. <br><br>Make sure to also replace <em>YOURNAME</em> with your character's name.<a href="#fnref:3" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:4"><p>Spamming this macro will mark groups (starting from Group 2). With each press, you will mark the next group. The order goes like this: Group 2 > Group 3 > Group 4. After you marked group 4, you'll go back to marking group 2, so the macro rotates. This is useful on variety of bosses where a group has to perform a certain act, like Gurtogg Bloodboil in Black Temple.<br><br>Feel free to replace the name of the group (that will show up within the chat announcement) by replacing <em>GROUPNAME</em>.<a href="#fnref:4" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:5"><p>If you have dumber than usual DPS players who refuse to single target mobs, this will announce the target you want them to DPS down. If your target has a mark, it will also be included in the raid warning. Make sure you yourself target the mobs before you use this macro.<a href="#fnref:5" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:6"><p>Replace <em>HEALTHVALUE</em> with the HP threshold you'd like.<a href="#fnref:6" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:7"><p>Replace <em>SPELLID</em> with the spell ID of the buff you want to remove.<a href="#fnref:7" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:8"><p>Be very careful using this. It's not visible but you <em>do get out of form</em> when you use this macro and if your target swings at you at that particular time, you will die.<br><br>Same as the Smart Powershift macro, make sure to change the value of <em>n</em> with the mana threshold you don't want powershifting to drop you below, so you don't stand in front of your target out of form with no mana to get back in form like a tool.<a href="#fnref:8" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:9"><p>Replace <em>MANAVALUE</em> with the mana threshold you don't want powershifting to drop you below.<a href="#fnref:9" title="return to article"> ↩</a><p></li></ol></div>
    <div class="footnotes"><ol><li class="footnote" id="fn:10"><p>If you want to change amount of shards you want to keep, change the amount <em>30</em> within the macro.<a href="#fnref:10" title="return to article"> ↩</a><p></li></ol></div>
</body>